# =============================================================================
# Application Management Dashboard - Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# REQUIRED variables are marked with [REQUIRED]
# OPTIONAL variables have default values or are feature-specific

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3000
NODE_ENV=production
VERBOSE_APP_DEBUG=0

# =============================================================================
# SECURITY [REQUIRED]
# =============================================================================
# Session secret for cookie signing (min 32 random characters)
SESSION_SECRET=

# File signing secret (defaults to SESSION_SECRET if not set)
# Recommended: use a different secret for production
FILES_SIGNING_SECRET=

# =============================================================================
# DATABASE CONFIGURATION [REQUIRED]
# =============================================================================
# Main database connection
DB_HOST=postgres-db
DB_PORT=5432
DB_NAME=applicationDashboard
DB_USER=admin
DB_PASSWORD=

# Alternative: Use POSTGRES_PASSWORD (will be used as fallback for DB_PASSWORD)
POSTGRES_PASSWORD=

# Database schema (optional, defaults to 'public')
DB_SCHEMA=public

# =============================================================================
# MULTI-TENANT CONFIGURATION
# =============================================================================
# Comma-separated list of app IDs (auto-discovered if not set)
APPS=ats
DEFAULT_APP=ats

# ATS Database (if using separate database for ATS app)
# If these are set, ALL of them must be provided
ATS_DB_HOST=
ATS_DB_PORT=5432
ATS_DB_NAME=
ATS_DB_USER=
ATS_DB_PASSWORD=

# =============================================================================
# AZURE AD AUTHENTICATION (Delegated Auth for Dashboard)
# =============================================================================
# All three are required for Azure AD login to work
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_REDIRECT_URI=https://ats.s3protection.com/api/auth/callback

# =============================================================================
# AZURE OAUTH (Service-to-Service / Client Credentials)
# =============================================================================
# Used by public site to authenticate API calls
OAUTH_TENANT_ID=
OAUTH_API_AUDIENCE=
OAUTH_REQUIRED_ROLE=
REQUIRE_BEARER_FOR_PUBLIC_APPLY=0

# =============================================================================
# CROSS-SITE SESSION CONFIGURATION
# =============================================================================
# Set to 1 if frontend is on different domain (requires HTTPS)
CROSS_SITE_SESSION=0

# =============================================================================
# FILE STORAGE
# =============================================================================
FILES_ROOT=/app/app/uploads
FILES_PUBLIC_URL=https://ats.s3protection.com/api/files
MAX_UPLOAD_MB=25

# File search and upload debugging
DEBUG_SEARCH=0
DEBUG_UPLOADS=0

# =============================================================================
# API KEYS (Optional - features disabled if not set)
# =============================================================================

# OpenAI for AI features
OPENAI_API_KEY=

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Mailgun (for email notifications)
MAILGUN_API_KEY=
MAILGUN_DOMAIN=

# Microsoft Graph Push Notifications (optional)
GRAPH_PUSH_ENABLED=0
GRAPH_NOTIFY_MAILBOX=

# =============================================================================
# LINKEDIN OAUTH (for job applications)
# =============================================================================
LINKEDIN_CLIENT_ID=
LINKEDIN_CLIENT_SECRET=

# =============================================================================
# CONNECTWISE INTEGRATION (optional)
# =============================================================================
CW_CLIENT_ID=
CW_CLIENT_SECRET=
CW_REDIRECT_URI=
CW_SCOPE=company

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins for public submissions
PUBLIC_APP_ALLOWED_ORIGIN=

# =============================================================================
# SWAGGER/API DOCUMENTATION
# =============================================================================
SWAGGER_SERVER_URL=https://ats.s3protection.com/api

# =============================================================================
# DEBUGGING
# =============================================================================
# Enable detailed authentication debugging (0 or 1)
AUTH_DEBUG=0
